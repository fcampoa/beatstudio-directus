(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-229d835e"],{"32cb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interface-repeater"},[n("draggable",{staticClass:"row-container",class:{dragging:e.dragging},attrs:{handle:".drag-handle"},on:{start:function(t){e.dragging=!0},end:e.endDrag},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}},e._l(e.rows,(function(t,i){return n("repeater-row",{key:t.__key,attrs:{row:t,fields:e.repeaterFields,inline:e.inline,template:e.options.template,duplicable:e.options.duplicable,open:e.open===i,placeholder:e.options.placeholder},on:{open:function(t){return e.toggleOpen(i)},input:function(t){return e.updateRow(i,t)},remove:function(t){return e.removeRow(i)},duplicate:function(t){return e.duplicateRow(i)}}})})),1),e.addButtonVisible?n("div",{staticClass:"add-new",on:{click:e.addRow}},[n("v-icon",{attrs:{name:"add",color:"--input-icon-color"}}),e._v(" "+e._s(e.options.createItemText)+" ")],1):e._e()],1)},r=[],o=(n("a4d3"),n("99af"),n("a623"),n("4de4"),n("4160"),n("caad"),n("d81d"),n("a434"),n("e439"),n("dbb4"),n("b64b"),n("07ac"),n("159b"),n("2909")),l=n("ade3"),s=n("8db2"),a=n.n(s),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{ref:"interfaceRoot",staticClass:"repeater-row"},[n("div",{staticClass:"header"},[n("div",{staticClass:"drag-handle"},[n("v-icon",{attrs:{name:"drag_handle"}})],1),n("div",{staticClass:"content",class:{"two-up":e.inline&&2===e.fields.length}},[e.inline?e._l(e.fields,(function(t){return n("v-ext-input",{key:t.field,attrs:{id:t.interface||"text-input",name:t.field,required:t.required,readonly:t.readonly,options:t.options,type:t.type,datatype:t.datatype,value:e.row[t.field],fields:e.fields,values:e.row,length:t.length},on:{input:function(n){return e.$emit("input",{field:t.field,value:n})}}})})):n("button",{class:e.showPlaceholder?"placeholder":"preview",attrs:{type:"button"},on:{click:function(t){return e.$emit("open")}}},[e._v(" "+e._s(e.showPlaceholder?e.placeholder:e.displayValue)+" ")])],2),e.duplicable?n("v-contextual-menu",{staticClass:"more-options",attrs:{placement:"bottom-end",options:e.rowOptions},on:{click:e.rowOptionsClicked}}):n("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("remove")}}},[n("v-icon",{staticClass:"remove",attrs:{name:"delete_outline"}})],1)],1),!1===e.inline?n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"body"},[n("v-form",{attrs:{"full-width":"",fields:e.fields,values:e.row,"new-item":e.newItem},on:{"stage-value":function(t){return e.$emit("input",t)}}})],1):e._e()])},c=[],d=n("1581"),p={name:"RepeaterRow",props:{row:{type:Object,required:!0},fields:{type:Array,required:!0},inline:{type:Boolean,default:!1},template:{type:String,default:null},duplicable:{type:Boolean,default:!1},open:{type:Boolean,default:!1},placeholder:{type:String,required:!0}},computed:{newItem:function(){return!0===this.row.newItem},displayValue:function(){if(!this.template)return this.row[this.fields[0].field];var e=this.$helpers.micromustache.render(this.template,this.row);return e},showPlaceholder:function(){var e=this,t=[this.fields[0].field];this.template&&(t=Object(d["a"])(this.template));var n=t.every((function(t){var n;return null!==e.row[t]&&(null===(n=e.row[t])||void 0===n?void 0:n.length)>0}));return!1===n},rowOptions:function(){return[{text:this.$t("delete"),icon:"delete_outline"},{text:this.$t("duplicate"),icon:"control_point_duplicate"}]}},methods:{rowOptionsClicked:function(e){switch(e){case 0:this.$emit("remove");break;case 1:this.$emit("duplicate");break;default:}}}},f=p,h=(n("8625"),n("2877")),w=Object(h["a"])(f,u,c,!1,null,"513ecad0",null),v=w.exports,m=n("8dee"),y=n.n(m),b=n("2ef0");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={name:"Repeater",components:{RepeaterRow:v},mixins:[a.a],data:function(){return{rows:[],dragging:!1,open:null}},computed:{inline:function(){return!(this.repeaterFields.length>2)&&(1===this.repeaterFields.length||!1!==["full","fill"].includes(this.width)&&this.repeaterFields.every((function(e){return"half"===e.width})))},addButtonVisible:function(){return!this.options.limit||0===this.options.limit||this.rows.length<this.options.limit},repeaterFields:function(){var e=this;return Array.isArray(this.options.fields)?this.options.fields:Object.keys(this.options.fields).map((function(t){return O({},e.options.fields[t],{field:t})}))}},created:function(){this.setRows()},methods:{addRow:function(){this.rows=[].concat(Object(o["a"])(this.rows),[this.getNewRow()]),this.open=this.rows.length-1,this.emitValue()},updateRow:function(e,t){var n=t.field,i=t.value,r=Object(b["clone"])(this.rows),o=r[e],s=O({},o,Object(l["a"])({},n,i));r[e]=s,this.rows=r,this.emitValue()},removeRow:function(e){var t=Object(b["clone"])(this.rows);t.splice(e,1),this.rows=t,this.emitValue()},duplicateRow:function(e){var t=Object(b["clone"])(this.rows),n=Object(b["clone"])(this.rows[e]);t.splice(e+1,0,n),this.rows=t,this.emitValue()},emitValue:function(){var e=Object(b["clone"])(this.rows).map((function(e){return delete e.__key,e}));if(0===e.length)return this.$emit("input",null);"object"===this.options.structure?this.$emit("input",Object(b["keyBy"])(e,this.options.structure_key)):this.$emit("input",e)},getNewRow:function(){var e={__key:y.a.generate(),newItem:!0};return this.repeaterFields.forEach((function(t){e[t.field]=t.default})),e},setRows:function(){if(null!==this.value)if(Array.isArray(this.value))this.rows=this.value;else if("string"===typeof this.value)try{this.rows=JSON.parse(this.value)}catch(e){console.warn("Invalid JSON passed to repeater")}else this.rows=Object.values(this.value);else this.rows=[]},endDrag:function(){this.dragging=!1,this.emitValue()},toggleOpen:function(e){this.open===e?this.open=null:this.open=e}}},_=j,k=(n("8bfe"),Object(h["a"])(_,i,r,!1,null,"518346e1",null));t["default"]=k.exports},"7ce02":function(e,t,n){},8625:function(e,t,n){"use strict";var i=n("fee3"),r=n.n(i);r.a},"8bfe":function(e,t,n){"use strict";var i=n("7ce02"),r=n.n(i);r.a},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},primaryKey:{type:[Number,String],default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null},width:{type:String,default:null,validator(e){return["half","half-left","half-right","full","fill"].includes(e)}}}}},a623:function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").every,o=n("a640"),l=n("ae40"),s=o("every"),a=l("every");i({target:"Array",proto:!0,forced:!s||!a},{every:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},fee3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-229d835e.8a5afe0d.js.map